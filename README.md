shardkv架构图
![](https://github.com/lemonpoetry/raft-kv/blob/master/shardkv%E6%A1%86%E6%9E%B6%E5%9B%BE.png)

框架测试结果：（-race检测多线程中访问数据时的数据竞态，一般出现在漏锁上，框架搭建初期经常忘）
➜  raft git:(raft) ✗ go test -run Part -race 
Test (PartA): initial election ...
  ... Passed --   3.1  3   94   26978    0
Test (PartA): election after network failure ...
  ... Passed --   4.5  3  184   38101    0
Test (PartA): multiple elections ...
  ... Passed --   5.4  7  972  201839    0
Test (PartB): basic agreement ...
  ... Passed --   0.5  3   22    5616    3
Test (PartB): RPC byte count ...
  ... Passed --   1.8  3   54  115804   11
Test (PartB): test progressive failure of followers ...
  ... Passed --   4.4  3  184   38230    3
Test (PartB): test failure of leaders ...
  ... Passed --   5.0  3  270   61114    3
Test (PartB): agreement after follower reconnects ...
  ... Passed --   3.6  3  120   32157    7
Test (PartB): no agreement if too many followers disconnect ...
  ... Passed --   3.3  5  318   64828    3
Test (PartB): concurrent Start()s ...
  ... Passed --   0.7  3   24    6302    6
Test (PartB): rejoin of partitioned leader ...
  ... Passed --   6.1  3  258   65932    4
Test (PartB): leader backs up quickly over incorrect follower logs ...
  ... Passed --  20.6  5 2517 1956195  102
Test (PartB): RPC counts aren't too high ...
  ... Passed --   2.2  3   65   19294   12
Test (PartC): basic persistence ...
  ... Passed --   4.9  3  168   45357    7
Test (PartC): more persistence ...
  ... Passed --  14.7  5 1266  277162   16
Test (PartC): partitioned leader and one follower crash, leader restarts ...
  ... Passed --   1.1  3   41   10873    4
Test (PartC): Figure 8 ...
  ... Passed --  31.2  5 1759  387419   46
Test (PartC): unreliable agreement ...
  ... Passed --   3.8  5  220   80853  246
Test (PartC): Figure 8 (unreliable) ...
  ... Passed --  35.4  5 4664 8256169  251
Test (PartC): churn ...
  ... Passed --  16.3  5 1443  886128   82
Test (PartC): unreliable churn ...
  ... Passed --  16.2  5  954  422659  524
Test (PartD): snapshots basic ...
  ... Passed --   4.9  3  145   53724  229
Test (PartD): install snapshots (disconnect) ...
  ... Passed --  55.2  3 1736  672025  344
Test (PartD): install snapshots (disconnect+unreliable) ...
  ... Passed --  65.0  3 2020  796668  351
Test (PartD): install snapshots (crash) ...
  ... Passed --  71.0  3 2034  713683  308
Test (PartD): install snapshots (unreliable+crash) ...
  ... Passed --  73.9  3 2055  771062  336
Test (PartD): crash and restart all servers ...
  ... Passed --   7.9  3  259   73616   50
Test (PartD): snapshot initialization after crash ...
  ... Passed --   2.4  3   82   22474   14
PASS
ok      course/raft     465.425s



进行30个并发任务，进行100轮测试，检验框架的正确性
![image](https://github.com/user-attachments/assets/89809bd6-c24b-4a9f-8e63-87fd8f9fe13e)

